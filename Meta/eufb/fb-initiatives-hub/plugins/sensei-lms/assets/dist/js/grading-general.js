!function(e){var r={};function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)n.d(t,a,function(r){return e[r]}.bind(null,a));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=371)}({371:function(e,r){jQuery(document).ready((function(e){jQuery.fn.exists=function(){return this.length>0},jQuery.fn.calculateTotalGrade=function(){var e,r,n=0,t=0;jQuery(".question_box.user_right").each((function(){e=jQuery(this).find(".question_id").val(),r=parseInt(jQuery(this).find("#question_"+e+"_grade").val()),n+=r,t++})),jQuery(".question_box.user_wrong").each((function(){t++})),jQuery("#total_graded_questions").val(t);var a=parseInt(jQuery("#total_questions").val()),i=parseInt(jQuery("#quiz_grade_total").val()),o="0";0<i&&(o=parseFloat(100*n/i).toFixed(2)),o=o.replace(".00",""),jQuery("#total_grade").val(n),jQuery(".total_grade_total").html(n),jQuery(".total_grade_percent").html(o),jQuery(".quiz_grade_total").html(i),a==t?(jQuery("#all_questions_graded").val("yes"),jQuery(".grade-button").val("Grade")):(jQuery("#all_questions_graded").val("no"),jQuery(".grade-button").val("Save"))},e.fn.autoGrade=function(){e(".question_box").each((function(){var r,n,t=e(this),a=!1;if(t.hasClass("user_right")||t.hasClass("user_wrong")||t.hasClass("zero-graded"))jQuery(this).hasClass("zero-graded")&&(t.find(".grading-mark.icon_wrong input").attr("checked",!1),t.find(".grading-mark.icon_right input").attr("checked",!1),t.find("input.question-grade").val(0));else if(t.addClass("ungraded"),t.hasClass("gap-fill")?(r=t.find(".user-answer .highlight").html(),n=t.find(".correct-answer .highlight").html()):(r=t.find(".user-answer").html(),n=t.find(".correct-answer").html()),r=e.trim(r),n=e.trim(n),t.hasClass("auto-grade")){if(t.hasClass("multiple-choice")){var i=r.split("<br>"),o=n.split("<br>");a=!0,i.forEach((function(r){-1===e.inArray(r,o)&&(a=!1)}))}a||r===n?(t.addClass("user_right").removeClass("user_wrong").removeClass("ungraded"),t.find(".grading-mark.icon_right input").attr("checked",!0),t.find(".grading-mark.icon_wrong input").attr("checked",!1),t.find("input.question-grade").val(t.find("input.question_total_grade").val())):(t.addClass("user_wrong").removeClass("user_right").removeClass("ungraded"),t.find(".grading-mark.icon_wrong input").attr("checked",!0),t.find(".grading-mark.icon_right input").attr("checked",!1),t.find("input.question-grade").val(0))}else t.find(".grading-mark.icon_wrong input").attr("checked",!1),t.find(".grading-mark.icon_right input").attr("checked",!1),t.removeClass("user_wrong").removeClass("user_right")})),e.fn.calculateTotalGrade()},jQuery.fn.resetGrades=function(){jQuery(".question_box").find(".grading-mark.icon_wrong input").attr("checked",!1),jQuery(".question_box").find(".grading-mark.icon_right input").attr("checked",!1),jQuery(".question_box").removeClass("user_wrong").removeClass("user_right").removeClass("ungraded"),jQuery(".question-grade").val("0"),jQuery.fn.calculateTotalGrade()},jQuery.fn.getQueryVariable=function(e){for(var r=window.location.search.substring(1).split("&"),n=0;n<r.length;n++){var t=r[n].split("=");if(t[0]==e)return t[1]}return!1},jQuery("#grading-course-options").on("change","",(function(){var e=jQuery(this).val();return jQuery.get(ajaxurl,{action:"get_lessons_dropdown",course_id:e},(function(e){""!=e&&(jQuery("#learners-to-grade").empty(),jQuery("#learners-graded").empty(),jQuery("#grading-lesson-options").empty().append(e),jQuery("#grading-lesson-options").exists()&&(jQuery("#grading-lesson-options-label").show(),jQuery("#grading-lesson-options").trigger("change")))})),!1})),jQuery("#grading-lesson-options").on("change","",(function(){var e=jQuery(this).val(),r=jQuery("#grading-course-options").val(),n=jQuery.fn.getQueryVariable("view");return jQuery.get(ajaxurl,{action:"get_redirect_url",course_id:r,lesson_id:e,view:n},(function(e){""!=e&&(window.location=e)})),!1})),jQuery(".grading-mark").on("change","input",(function(){"right"==this.value?(jQuery("#"+this.name+"_box").addClass("user_right").removeClass("user_wrong ungraded"),jQuery("#"+this.name+"_box").find("input.question-grade").val(jQuery("#"+this.name+"_box").find("input.question_total_grade").val())):(jQuery("#"+this.name+"_box").addClass("user_wrong").removeClass("user_right ungraded"),jQuery("#"+this.name+"_box").find("input.question-grade").val(0)),jQuery.fn.calculateTotalGrade()})),jQuery(".question-grade").on("change","",(function(){var e=parseInt(jQuery(this).val()),r=this.id.replace("_grade","");e>0?(jQuery("#"+r+"_box").addClass("user_right").removeClass("user_wrong"),jQuery("#"+r+"_box .grading-mark input."+r+"_right_option").attr("checked","checked"),jQuery("#"+r+"_box .grading-mark input."+r+"_wrong_option").attr("checked",!1)):(jQuery("#"+r+"_box").addClass("user_wrong").removeClass("user_right"),jQuery("#"+r+"_box .grading-mark input."+r+"_wrong_option").attr("checked","checked"),jQuery("#"+r+"_box .grading-mark input."+r+"_right_option").attr("checked",!1)),jQuery.fn.calculateTotalGrade()})),jQuery(".sensei-grading-main .buttons").on("click",".reset-button",(function(){jQuery.fn.resetGrades()})),jQuery(".sensei-grading-main .buttons").on("click",".autograde-button",(function(){e(".boolean.manual-grade, .multiple-choice.manual-grade, .gap-fill.manual-grade").addClass("auto-grade").removeClass("manual-grade"),jQuery.fn.autoGrade()})),jQuery("#grading-course-options").exists()&&jQuery("#grading-course-options").select2(),jQuery("#grading-lesson-options").exists()&&jQuery("#grading-lesson-options").select2()}))}});